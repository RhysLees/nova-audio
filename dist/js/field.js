/*! For license information please see field.js.LICENSE.txt */
(()=>{"use strict";var e,t={354:(e,t,r)=>{const o=Vue;var n=["controlslist","autoplay","preload","src"],i={key:1};const a={props:["viaResource","viaResourceId","resourceName","field"],computed:{controlsList:function(){var e="nodownload";return this.field.playbackRate||(e+=" noplaybackrate"),e},preload:function(){return this.field.preload||"none"},autoplay:function(){return this.field.autoplay||!1}}};var l=r(744);const c=(0,l.Z)(a,[["render",function(e,t,r,a,l,c){return(0,o.openBlock)(),(0,o.createElementBlock)("div",null,[r.field.previewUrl?((0,o.openBlock)(),(0,o.createElementBlock)("audio",{key:0,class:"max-w-[250px] mx-auto",controls:"",controlslist:c.controlsList,autoplay:c.autoplay,preload:c.preload,src:r.field.previewUrl},null,8,n)):((0,o.openBlock)(),(0,o.createElementBlock)("span",i,"—")),(0,o.createElementVNode)("span",null,(0,o.toDisplayString)(e.controlslist),1)])}]]);var s=["controlslist","autoplay","preload","src"],u={key:1,class:"break-words"},d={key:2},f={key:3,class:"flex items-center text-sm mt-3"},p=["dusk"],h={class:"class mt-1"};const v={props:["resource","resourceName","resourceId","field"],methods:{download:function(){var e=this.resourceName,t=this.resourceId,r=this.field.attribute,o=document.createElement("a");o.href="/nova-api/".concat(e,"/").concat(t,"/download/").concat(r),o.download="download",document.body.appendChild(o),o.click(),document.body.removeChild(o)}},computed:{hasValue:function(){return Boolean(this.field.value||this.previewUrl)&&!Boolean(this.missing)},previewUrl:function(){return this.field.previewUrl},shouldShowAudio:function(){return Boolean(this.field.previewUrl)},shouldShowToolbar:function(){return Boolean(this.field.downloadable&&this.hasValue)},rounded:function(){return this.field.rounded},maxWidth:function(){return this.field.maxWidth||320},controlsList:function(){var e="nodownload";return this.field.playbackRate||(e+=" noplaybackrate"),e},preload:function(){return this.field.preload||"none"},autoplay:function(){return this.field.autoplay||!1}}},m=(0,l.Z)(v,[["render",function(e,t,r,n,i,a){var l=(0,o.resolveComponent)("icon"),c=(0,o.resolveComponent)("PanelItem");return(0,o.openBlock)(),(0,o.createBlock)(c,{index:e.index,field:r.field},{value:(0,o.withCtx)((function(){return[a.shouldShowAudio?((0,o.openBlock)(),(0,o.createElementBlock)("audio",{key:0,class:"w-full",controls:"",controlslist:a.controlsList,autoplay:a.autoplay,preload:a.preload,src:r.field.previewUrl},null,8,s)):(0,o.createCommentVNode)("",!0),r.field.value&&!r.field.previewUrl?((0,o.openBlock)(),(0,o.createElementBlock)("span",u,(0,o.toDisplayString)(r.field.value),1)):(0,o.createCommentVNode)("",!0),r.field.value||r.field.previewUrl?(0,o.createCommentVNode)("",!0):((0,o.openBlock)(),(0,o.createElementBlock)("span",d,"—")),a.shouldShowToolbar?((0,o.openBlock)(),(0,o.createElementBlock)("p",f,[r.field.downloadable?((0,o.openBlock)(),(0,o.createElementBlock)("a",{key:0,dusk:r.field.attribute+"-download-link",onKeydown:t[0]||(t[0]=(0,o.withKeys)((0,o.withModifiers)((function(){return a.download&&a.download.apply(a,arguments)}),["prevent"]),["enter"])),onClick:t[1]||(t[1]=(0,o.withModifiers)((function(){return a.download&&a.download.apply(a,arguments)}),["prevent"])),tabindex:"0",class:"cursor-pointer dim btn btn-link text-primary inline-flex items-center"},[(0,o.createVNode)(l,{class:"mr-2",type:"download","view-box":"0 0 24 24",width:"16",height:"16"}),(0,o.createElementVNode)("span",h,(0,o.toDisplayString)(e.__("Download")),1)],40,p)):(0,o.createCommentVNode)("",!0)])):(0,o.createCommentVNode)("",!0)]})),_:1},8,["index","field"])}]]);var y={class:"space-y-4"},w={key:0,class:"grid grid-cols-4 gap-x-6 gap-y-2"},g={class:"col-span-3"},k=["controlslist","autoplay","src"];const b=LaravelNova;function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function F(){F=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},n=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,o){var n=t&&t.prototype instanceof d?t:d,i=Object.create(n.prototype),a=new B(o||[]);return i._invoke=function(e,t,r){var o="suspendedStart";return function(n,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===n)throw i;return L()}for(r.method=n,r.arg=i;;){var a=r.delegate;if(a){var l=k(a,r);if(l){if(l===u)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===o)throw o="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o="executing";var c=s(e,t,r);if("normal"===c.type){if(o=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(o="completed",r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var u={};function d(){}function f(){}function p(){}var h={};l(h,n,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(N([])));m&&m!==t&&r.call(m,n)&&(h=m);var y=p.prototype=d.prototype=Object.create(h);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){function o(n,i,a,l){var c=s(e[n],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==x(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,l)}))}l(c.arg)}var n;this._invoke=function(e,r){function i(){return new t((function(t,n){o(e,r,t,n)}))}return n=n?n.then(i,i):i()}}function k(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,u;var n=o.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function N(e){if(e){var t=e[n];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(r.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return f.prototype=p,l(y,"constructor",p),l(p,"constructor",f),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},w(g.prototype),l(g.prototype,i,(function(){return this})),e.AsyncIterator=g,e.async=function(t,r,o,n,i){void 0===i&&(i=Promise);var a=new g(c(t,r,o,n),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(y),l(y,a,"Generator"),l(y,n,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var o=t.pop();if(o in e)return r.value=o,r.done=!1,r}return r.done=!0,r}},e.values=N,B.prototype={constructor:B,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(r,o){return a.type="throw",a.arg=e,t.next=r,o&&(t.method="next",t.arg=void 0),!!o}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(l&&c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;E(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},e}function E(e,t,r,o,n,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(o,n)}function B(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var i=e.apply(t,r);function a(e){E(i,o,n,a,l,"next",e)}function l(e){E(i,o,n,a,l,"throw",e)}a(void 0)}))}}function N(e){return{name:e.name,extension:e.name.split(".").pop(),type:e.type,originalFile:e}}const L={emits:["file-upload-started","file-upload-finished","file-deleted"],props:["resourceId","relatedResourceName","relatedResourceId","viaRelationship"],mixins:[b.HandlesValidationErrors,b.DependentFormField],data:function(){return{previewFile:null,file:null,removeModalOpen:!1,missing:!1,deleted:!1,uploadErrors:new b.Errors,vaporFile:{key:"",uuid:"",filename:"",extension:""},uploadProgress:0,startedDrag:!1,uploadModalShown:!1}},mounted:function(){var e=this;return B(F().mark((function t(){return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preparePreviewImage(),e.field.fill=function(t){var r=e.field.attribute;e.file&&!e.isVaporField&&t.append(r,e.file.originalFile,e.file.name),e.file&&e.isVaporField&&(t.append(r,e.file.name),t.append("vaporFile["+r+"][key]",e.vaporFile.key),t.append("vaporFile["+r+"][uuid]",e.vaporFile.uuid),t.append("vaporFile["+r+"][filename]",e.vaporFile.filename),t.append("vaporFile["+r+"][extension]",e.vaporFile.extension))};case 2:case"end":return t.stop()}}),t)})))()},methods:{preparePreviewImage:function(){this.hasValue&&this.imageUrl&&this.fetchPreviewImage(),this.hasValue&&!this.imageUrl&&(this.previewFile=N({name:this.currentField.value,type:this.currentField.value.split(".").pop()}))},fetchPreviewImage:function(){var e=this;return B(F().mark((function t(){var r,o;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.imageUrl);case 2:return r=t.sent,t.next=5,r.blob();case 5:o=t.sent,e.previewFile=N(new File([o],e.currentField.value,{type:o.type}));case 7:case"end":return t.stop()}}),t)})))()},handleFileChange:function(e){this.file=N(e[0]),this.isVaporField&&this.uploadVaporFiles()},removeFile:function(){this.file=null},uploadVaporFiles:function(){var e=this;this.file.processing=!0,this.$emit("file-upload-started"),Vapor.store(this.file.originalFile).then((function(t){e.vaporFile.key=t.key,e.vaporFile.uuid=t.uuid,e.vaporFile.filename=e.file.name,e.vaporFile.extension=e.file.extension,e.file.processing=!1,e.$emit("file-upload-finished")})).catch((function(t){403===t.response.status&&Nova.error(e.__("Sorry! You are not authorized to perform this action."))}))},confirmRemoval:function(){this.removeModalOpen=!0},closeRemoveModal:function(){this.removeModalOpen=!1},removeUploadedFile:function(){var e=this;return B(F().mark((function t(){var r,o,n,i,a,l,c,s;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.uploadErrors=new b.Errors,r=e.resourceName,o=e.resourceId,n=e.relatedResourceName,i=e.relatedResourceId,a=e.viaRelationship,l=e.field.attribute,c=e.viaRelationship&&e.relatedResourceName&&e.relatedResourceId?"/nova-api/".concat(r,"/").concat(o,"/").concat(n,"/").concat(i,"/field/").concat(l,"?viaRelationship=").concat(a):"/nova-api/".concat(r,"/").concat(o,"/field/").concat(l),t.prev=4,t.next=7,Nova.request().delete(c);case 7:e.closeRemoveModal(),e.deleted=!0,e.$emit("file-deleted"),Nova.success(e.__("The file was deleted!")),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(4),e.closeRemoveModal(),422===(null===(s=t.t0.response)||void 0===s?void 0:s.status)&&(e.uploadErrors=new b.Errors(t.t0.response.data.errors));case 17:case"end":return t.stop()}}),t,null,[[4,13]])})))()}},computed:{files:function(){return this.file?[this.file]:[]},hasError:function(){return this.uploadErrors.has(this.fieldAttribute)},firstError:function(){if(this.hasError)return this.uploadErrors.first(this.fieldAttribute)},idAttr:function(){return this.labelFor},labelFor:function(){var e=this.resourceName;return this.relatedResourceName&&(e+="-"+this.relatedResourceName),"file-".concat(e,"-").concat(this.field.attribute)},hasValue:function(){return Boolean(this.field.value||this.imageUrl)&&!Boolean(this.deleted)&&!Boolean(this.missing)},shouldShowAudio:function(){return!Boolean(this.deleted)&&Boolean(this.previewUrl)},shouldShowField:function(){return Boolean(!this.currentlyIsReadonly)},shouldShowRemoveButton:function(){return Boolean(this.currentField.deletable&&!this.currentlyIsReadonly)},imageUrl:function(){return this.currentField.previewUrl||this.currentField.thumbnailUrl},isVaporField:function(){return"vapor-file-field"==this.currentField.component},controlsList:function(){var e="nodownload";return this.field.playbackRate||(e+=" noplaybackrate"),e},preload:function(){return this.field.preload||"none"},autoplay:function(){return this.field.autoplay||!1}}},C=(0,l.Z)(L,[["render",function(e,t,r,n,i,a){var l=(0,o.resolveComponent)("DeleteButton"),c=(0,o.resolveComponent)("ConfirmUploadRemovalModal"),s=(0,o.resolveComponent)("DropZone"),u=(0,o.resolveComponent)("DefaultField");return(0,o.openBlock)(),(0,o.createBlock)(u,{field:e.currentField,"label-for":a.labelFor,errors:e.errors,"show-help-text":!e.isReadonly&&e.showHelpText,"full-width-content":e.fullWidthContent},{field:(0,o.withCtx)((function(){var t;return[(0,o.createElementVNode)("div",y,[a.hasValue&&e.previewFile&&0==a.files.length?((0,o.openBlock)(),(0,o.createElementBlock)("div",w,[(0,o.createElementVNode)("div",g,[(0,o.createElementVNode)("audio",{class:"w-full mr-3",controls:"",controlslist:a.controlsList,autoplay:a.autoplay,preload:"true",src:e.field.previewUrl},null,8,k)]),a.shouldShowRemoveButton?((0,o.openBlock)(),(0,o.createBlock)(l,{key:0,dusk:e.field.attribute+"-internal-delete-link",class:"ml-auto",onClick:a.confirmRemoval},null,8,["dusk","onClick"])):(0,o.createCommentVNode)("",!0)])):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(c,{show:e.removeModalOpen,onConfirm:a.removeUploadedFile,onClose:a.closeRemoveModal},null,8,["show","onConfirm","onClose"]),a.shouldShowField?((0,o.openBlock)(),(0,o.createBlock)(s,{key:1,onChange:a.handleFileChange,files:a.files,onFileRemoved:a.removeFile,rounded:e.field.rounded,"accepted-types":e.field.acceptedTypes,disabled:null===(t=e.file)||void 0===t?void 0:t.processing,dusk:e.field.attribute+"-delete-link","input-dusk":e.field.attribute},null,8,["onChange","files","onFileRemoved","rounded","accepted-types","disabled","dusk","input-dusk"])):(0,o.createCommentVNode)("",!0)])]})),_:1},8,["field","label-for","errors","show-help-text","full-width-content"])}]]);Nova.booting((function(e,t){e.component("index-audio",c),e.component("detail-audio",m),e.component("form-audio",C)}))},381:()=>{},744:(e,t)=>{t.Z=(e,t)=>{const r=e.__vccOpts||e;for(const[e,o]of t)r[e]=o;return r}}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,r,n,i)=>{if(!r){var a=1/0;for(u=0;u<e.length;u++){for(var[r,n,i]=e[u],l=!0,c=0;c<r.length;c++)(!1&i||a>=i)&&Object.keys(o.O).every((e=>o.O[e](r[c])))?r.splice(c--,1):(l=!1,i<a&&(a=i));if(l){e.splice(u--,1);var s=n();void 0!==s&&(t=s)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[r,n,i]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={175:0,546:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,i,[a,l,c]=r,s=0;if(a.some((t=>0!==e[t]))){for(n in l)o.o(l,n)&&(o.m[n]=l[n]);if(c)var u=c(o)}for(t&&t(r);s<a.length;s++)i=a[s],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},r=self.webpackChunkrhyslees_nova_audio=self.webpackChunkrhyslees_nova_audio||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),o.O(void 0,[546],(()=>o(354)));var n=o.O(void 0,[546],(()=>o(381)));n=o.O(n)})();